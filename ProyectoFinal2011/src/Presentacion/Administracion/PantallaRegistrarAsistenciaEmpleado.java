/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/*
 * PantallaRegistrarAsistenciaEmpleado.java
 *
 * Created on 24-ene-2012, 23:23:34
 */
package Presentacion.Administracion;

import BaseDeDatos.Administracion.AsistenciaEmpleadoBD;
import BaseDeDatos.Administracion.EmpleadoBD;
import BaseDeDatos.HibernateUtil;
import Negocio.Administracion.AsistenciaEmpleado;
import Negocio.Administracion.Empleado;
import Negocio.Administracion.GestorAsistencia;
import Negocio.Administracion.GestorEmpleado;
import Negocio.Exceptiones.NegocioException;
import Presentacion.Mensajes;
import Presentacion.TablaManager;
import Presentacion.Utilidades;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Date;
import java.util.GregorianCalendar;
import javax.swing.Timer;
import java.util.Vector;
import javax.swing.border.TitledBorder;

/**
 *
 * @author Heber Parrucci
 */
public class PantallaRegistrarAsistenciaEmpleado extends javax.swing.JFrame {

    Empleado empleado = null;
    EmpleadoBD empleadoBD = new EmpleadoBD();
    TablaManager<Empleado> tmEmpleados;
    AsistenciaEmpleado asistencia = null;
    Timer tiempo;
    GestorAsistencia gestor;

    /** Creates new form PantallaRegistrarAsistenciaEmpleado */
    public PantallaRegistrarAsistenciaEmpleado(GestorAsistencia gestor) {
        this.gestor = gestor;
        initComponents();
        Utilidades.iniciarVentana(this);
        iniciarReloj();
        this.inicializarTablas();
        this.cargarEmpleados();
        Utilidades.habilitarPanel(pnlIngresoEgreso, false);
    }

    private void iniciarReloj() {

        tiempo = new Timer(1000, new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                txtReloj.setText(Utilidades.fechaHoraMinutoSegundoActual());
            }
        });

        tiempo.start();
    }

    private void inicializarTablas() {

        tmEmpleados = new TablaManager<Empleado>(tbEmpleado) {

            @Override
            public Vector getCabecera() {
                Vector cabecera = new Vector();

                cabecera.add("Legajo");
                cabecera.add("Nombre y Apellido");
                cabecera.add("Documento");
                cabecera.add("Último Ingreso");
                cabecera.add("Último Egreso");
                return cabecera;

            }

            @Override
            public Vector ObjetoFila(Empleado elemento) {

                Vector fila = new Vector();

                fila.add(elemento.getId());
                fila.add(elemento.getApellidoNombre());
                String documento = elemento.getTipoDocumento() + ": " + elemento.getNumeroDocumento();
                fila.add(documento);
                AsistenciaEmpleado ae = elemento.getUltimaAsistencia();
                String fecha = Utilidades.parseFecha(ae.getFecAsistencia());
                fila.add(fecha + " - " + ae.getHoraIngreso() + " Hs.");
                fila.add(fecha + " - " + ae.getHoraEgreso() + " Hs.");
                return fila;
            }
        };
    }

    private void cargarEmpleados() {
        tmEmpleados.setDatos(gestor.traerEmpleadosVigentes());
    }

    private void limpiarAsistencia() {
        txtApellidoNombre.setText("");
        txtDocumento.setText("");
        txtFechaIngresoEgreso.setText("");
        txtLegajo.setText("");
        txtObservaciones.setText("");
        setTituloPanelIngreso("Registrar Ingreso/Egreso");

    }

    private void setTituloPanelIngreso(String titulo) {
        if (pnlIngresoEgreso.getBorder() instanceof TitledBorder) {
            TitledBorder tb = (TitledBorder) pnlIngresoEgreso.getBorder();
            tb.setTitle(titulo);
        }
    }

    private void cargarDatosAsistenciaEmpleado(Empleado e) {
        txtApellidoNombre.setText(e.getApellidoNombre());
        String documento = e.getTipoDocumento() + ": " + e.getNumeroDocumento();
        txtDocumento.setText(documento);
        txtLegajo.setText(e.getId() + "");
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        pnlRegistrarAsistencia = new javax.swing.JPanel();
        pnlBotones = new javax.swing.JPanel();
        btnIngreso = new javax.swing.JButton();
        btnEgreso = new javax.swing.JButton();
        txtReloj = new javax.swing.JTextField();
        jLabel4 = new javax.swing.JLabel();
        pnlEmpleados = new javax.swing.JPanel();
        jScrollPane1 = new javax.swing.JScrollPane();
        tbEmpleado = new javax.swing.JTable();
        btnSalir = new javax.swing.JButton();
        pnlIngresoEgreso = new javax.swing.JPanel();
        lblDescripcionIngresoEgreso = new javax.swing.JLabel();
        txtApellidoNombre = new javax.swing.JTextField();
        jLabel1 = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();
        jLabel5 = new javax.swing.JLabel();
        lblFechaIngresoEgreso = new javax.swing.JLabel();
        btnCancelar = new javax.swing.JButton();
        btnAceptar = new javax.swing.JButton();
        txtFechaIngresoEgreso = new javax.swing.JTextField();
        txtDocumento = new javax.swing.JTextField();
        txtLegajo = new javax.swing.JTextField();
        jScrollPane2 = new javax.swing.JScrollPane();
        txtObservaciones = new javax.swing.JTextArea();
        jLabel2 = new javax.swing.JLabel();
        txtHoraIngresoEgreso = new javax.swing.JTextField();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setTitle("Registrar Aistencia de Empleados");

        pnlRegistrarAsistencia.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Registrar Asistencia", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Tahoma", 1, 11))); // NOI18N

        pnlBotones.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Registrar", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Tahoma", 1, 11))); // NOI18N

        btnIngreso.setText("Ingreso");
        btnIngreso.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnIngresoActionPerformed(evt);
            }
        });

        btnEgreso.setText("Egreso");
        btnEgreso.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnEgresoActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout pnlBotonesLayout = new javax.swing.GroupLayout(pnlBotones);
        pnlBotones.setLayout(pnlBotonesLayout);
        pnlBotonesLayout.setHorizontalGroup(
            pnlBotonesLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(btnEgreso, javax.swing.GroupLayout.DEFAULT_SIZE, 69, Short.MAX_VALUE)
            .addComponent(btnIngreso, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        pnlBotonesLayout.setVerticalGroup(
            pnlBotonesLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pnlBotonesLayout.createSequentialGroup()
                .addComponent(btnIngreso)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(btnEgreso)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        txtReloj.setEditable(false);
        txtReloj.setHorizontalAlignment(javax.swing.JTextField.CENTER);

        jLabel4.setFont(new java.awt.Font("Tahoma", 1, 11));
        jLabel4.setText("Fecha/Hora Actual:");

        pnlEmpleados.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Empleados", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Tahoma", 1, 11))); // NOI18N

        tbEmpleado.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "Legajo", "Nombre y Apellido", "Documento", "Ultimo Ingreso", "Ultimo Engreso"
            }
        ));
        jScrollPane1.setViewportView(tbEmpleado);

        javax.swing.GroupLayout pnlEmpleadosLayout = new javax.swing.GroupLayout(pnlEmpleados);
        pnlEmpleados.setLayout(pnlEmpleadosLayout);
        pnlEmpleadosLayout.setHorizontalGroup(
            pnlEmpleadosLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 439, Short.MAX_VALUE)
        );
        pnlEmpleadosLayout.setVerticalGroup(
            pnlEmpleadosLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jScrollPane1, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, 128, Short.MAX_VALUE)
        );

        javax.swing.GroupLayout pnlRegistrarAsistenciaLayout = new javax.swing.GroupLayout(pnlRegistrarAsistencia);
        pnlRegistrarAsistencia.setLayout(pnlRegistrarAsistenciaLayout);
        pnlRegistrarAsistenciaLayout.setHorizontalGroup(
            pnlRegistrarAsistenciaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pnlRegistrarAsistenciaLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(pnlRegistrarAsistenciaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(pnlRegistrarAsistenciaLayout.createSequentialGroup()
                        .addComponent(jLabel4)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(txtReloj, javax.swing.GroupLayout.PREFERRED_SIZE, 162, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, pnlRegistrarAsistenciaLayout.createSequentialGroup()
                        .addComponent(pnlEmpleados, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addGap(18, 18, 18)
                        .addComponent(pnlBotones, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap())
        );
        pnlRegistrarAsistenciaLayout.setVerticalGroup(
            pnlRegistrarAsistenciaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pnlRegistrarAsistenciaLayout.createSequentialGroup()
                .addGroup(pnlRegistrarAsistenciaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(txtReloj, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel4))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(pnlRegistrarAsistenciaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(pnlBotones, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(pnlEmpleados, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addContainerGap())
        );

        btnSalir.setText("Salir");
        btnSalir.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnSalirActionPerformed(evt);
            }
        });

        pnlIngresoEgreso.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Registrar Ingreso/Egreso", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Tahoma", 1, 11))); // NOI18N

        lblDescripcionIngresoEgreso.setFont(new java.awt.Font("Tahoma", 1, 11));
        lblDescripcionIngresoEgreso.setText("Observaciones:");

        txtApellidoNombre.setEditable(false);
        txtApellidoNombre.setMinimumSize(new java.awt.Dimension(150, 20));

        jLabel1.setFont(new java.awt.Font("Tahoma", 1, 11));
        jLabel1.setText("Nombre y Apellido:");

        jLabel3.setFont(new java.awt.Font("Tahoma", 1, 11));
        jLabel3.setText("Legajo:");

        jLabel5.setFont(new java.awt.Font("Tahoma", 1, 11));
        jLabel5.setText("Tipo y Nro de documento:");

        lblFechaIngresoEgreso.setFont(new java.awt.Font("Tahoma", 1, 11));
        lblFechaIngresoEgreso.setText("Fecha:");

        btnCancelar.setText("Cancelar");
        btnCancelar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnCancelarActionPerformed(evt);
            }
        });

        btnAceptar.setText("Aceptar");
        btnAceptar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnAceptarActionPerformed(evt);
            }
        });

        txtFechaIngresoEgreso.setEditable(false);
        txtFechaIngresoEgreso.setHorizontalAlignment(javax.swing.JTextField.CENTER);

        txtDocumento.setEditable(false);
        txtDocumento.setMinimumSize(new java.awt.Dimension(90, 20));

        txtLegajo.setEditable(false);
        txtLegajo.setHorizontalAlignment(javax.swing.JTextField.CENTER);

        txtObservaciones.setLineWrap(true);
        txtObservaciones.setWrapStyleWord(true);
        jScrollPane2.setViewportView(txtObservaciones);

        jLabel2.setFont(new java.awt.Font("Tahoma", 1, 11)); // NOI18N
        jLabel2.setText("Hora:");

        txtHoraIngresoEgreso.setEditable(false);

        javax.swing.GroupLayout pnlIngresoEgresoLayout = new javax.swing.GroupLayout(pnlIngresoEgreso);
        pnlIngresoEgreso.setLayout(pnlIngresoEgresoLayout);
        pnlIngresoEgresoLayout.setHorizontalGroup(
            pnlIngresoEgresoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, pnlIngresoEgresoLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(pnlIngresoEgresoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(jScrollPane2, javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(javax.swing.GroupLayout.Alignment.LEADING, pnlIngresoEgresoLayout.createSequentialGroup()
                        .addGroup(pnlIngresoEgresoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel5)
                            .addGroup(pnlIngresoEgresoLayout.createSequentialGroup()
                                .addComponent(jLabel3)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(txtLegajo, javax.swing.GroupLayout.PREFERRED_SIZE, 82, javax.swing.GroupLayout.PREFERRED_SIZE)))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(pnlIngresoEgresoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                            .addGroup(pnlIngresoEgresoLayout.createSequentialGroup()
                                .addComponent(txtDocumento, javax.swing.GroupLayout.DEFAULT_SIZE, 119, Short.MAX_VALUE)
                                .addGap(18, 18, 18)
                                .addComponent(jLabel1)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(txtApellidoNombre, javax.swing.GroupLayout.DEFAULT_SIZE, 179, Short.MAX_VALUE))
                            .addGroup(pnlIngresoEgresoLayout.createSequentialGroup()
                                .addComponent(lblFechaIngresoEgreso)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(txtFechaIngresoEgreso, javax.swing.GroupLayout.PREFERRED_SIZE, 89, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGap(18, 18, 18)
                                .addComponent(jLabel2)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(txtHoraIngresoEgreso, javax.swing.GroupLayout.PREFERRED_SIZE, 53, javax.swing.GroupLayout.PREFERRED_SIZE))))
                    .addGroup(pnlIngresoEgresoLayout.createSequentialGroup()
                        .addComponent(btnAceptar, javax.swing.GroupLayout.PREFERRED_SIZE, 79, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(btnCancelar))
                    .addComponent(lblDescripcionIngresoEgreso, javax.swing.GroupLayout.Alignment.LEADING))
                .addContainerGap())
        );
        pnlIngresoEgresoLayout.setVerticalGroup(
            pnlIngresoEgresoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pnlIngresoEgresoLayout.createSequentialGroup()
                .addGroup(pnlIngresoEgresoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel3)
                    .addComponent(txtLegajo, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(txtHoraIngresoEgreso, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel2)
                    .addComponent(txtFechaIngresoEgreso, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(lblFechaIngresoEgreso))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(pnlIngresoEgresoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel5)
                    .addComponent(txtDocumento, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(txtApellidoNombre, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel1))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(lblDescripcionIngresoEgreso)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jScrollPane2, javax.swing.GroupLayout.DEFAULT_SIZE, 46, Short.MAX_VALUE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(pnlIngresoEgresoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(btnCancelar)
                    .addComponent(btnAceptar))
                .addContainerGap())
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(pnlIngresoEgreso, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(btnSalir)
                    .addComponent(pnlRegistrarAsistencia, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(pnlRegistrarAsistencia, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(pnlIngresoEgreso, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(btnSalir)
                .addContainerGap())
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void btnSalirActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnSalirActionPerformed
        // TODO add your handling code here:
        this.dispose();
}//GEN-LAST:event_btnSalirActionPerformed

    private void btnAceptarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnAceptarActionPerformed


        try {

            gestor.aceptar(txtObservaciones.getText());
            Mensajes.mensajeInformacion("La asistencia se a registrado correctamente");

            limpiarAsistencia();
            Utilidades.habilitarPanel(pnlIngresoEgreso, false);
            tmEmpleados.updateTabla();

        } catch (NegocioException ne) {
            Mensajes.mensajeErrorGenerico(ne.getMessage());
        }

    }//GEN-LAST:event_btnAceptarActionPerformed

    private void btnCancelarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnCancelarActionPerformed

        if (Mensajes.mensajeConfirmacionGenerico("¿Desea cancelar esta asistencia?") == false) {
            return;
        }
        limpiarAsistencia();
        Utilidades.habilitarPanel(pnlIngresoEgreso, false);
        gestor.cancelar();

    }//GEN-LAST:event_btnCancelarActionPerformed

    private void btnIngresoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnIngresoActionPerformed
        // TODO add your handling code here:
        try {
            Empleado emp = tmEmpleados.getSeletedObject();
            gestor.iniciarRegistrarInbreso(emp);
            cargarDatosAsistenciaEmpleado(emp);
            txtFechaIngresoEgreso.setText(Utilidades.parseFecha(Utilidades.getFechaActual()));
            txtHoraIngresoEgreso.setText(Utilidades.parseHora(Utilidades.getFechaActual()));
            txtObservaciones.setText("");
            this.setTituloPanelIngreso("Registrar Ingreso");
            Utilidades.habilitarPanel(pnlIngresoEgreso, true);
        } catch (NegocioException ne) {
            Mensajes.mensajeErrorGenerico(ne.getMessage());
        }


    }//GEN-LAST:event_btnIngresoActionPerformed

    private void btnEgresoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnEgresoActionPerformed
        // TODO add your handling code here:
        try {
            Empleado emp = tmEmpleados.getSeletedObject();
            gestor.iniciarRegistrarEgreso(emp);
            cargarDatosAsistenciaEmpleado(emp);
            txtFechaIngresoEgreso.setText(Utilidades.parseFecha(Utilidades.getFechaActual()));
            txtHoraIngresoEgreso.setText(Utilidades.parseHora(Utilidades.getFechaActual()));
            txtObservaciones.setText("");
            this.setTituloPanelIngreso("Registrar Egreso");
            Utilidades.habilitarPanel(pnlIngresoEgreso, true);
        } catch (NegocioException ne) {
            Mensajes.mensajeErrorGenerico(ne.getMessage());
        }

    }//GEN-LAST:event_btnEgresoActionPerformed

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                PantallaRegistrarAsistenciaEmpleado.iniciarRegistroAsistencia();
            }
        });
    }

    public static void iniciarRegistroAsistencia()
    {
        new PantallaRegistrarAsistenciaEmpleado(new GestorAsistencia()).setVisible(true);
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton btnAceptar;
    private javax.swing.JButton btnCancelar;
    private javax.swing.JButton btnEgreso;
    private javax.swing.JButton btnIngreso;
    private javax.swing.JButton btnSalir;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JLabel lblDescripcionIngresoEgreso;
    private javax.swing.JLabel lblFechaIngresoEgreso;
    private javax.swing.JPanel pnlBotones;
    private javax.swing.JPanel pnlEmpleados;
    private javax.swing.JPanel pnlIngresoEgreso;
    private javax.swing.JPanel pnlRegistrarAsistencia;
    private javax.swing.JTable tbEmpleado;
    private javax.swing.JTextField txtApellidoNombre;
    private javax.swing.JTextField txtDocumento;
    private javax.swing.JTextField txtFechaIngresoEgreso;
    private javax.swing.JTextField txtHoraIngresoEgreso;
    private javax.swing.JTextField txtLegajo;
    private javax.swing.JTextArea txtObservaciones;
    private javax.swing.JTextField txtReloj;
    // End of variables declaration//GEN-END:variables
}
